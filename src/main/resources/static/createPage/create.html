<!DOCTYPE html>
<html lang="ru">
<head>
    <a href="http://NoteSharing"></a>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="create.css">
</head>
<body>
<form method="post">
    <div class="title-container">
        <textarea maxlength="140" rows="1" id="titleTextarea" name="titleTextarea" placeholder="Title..."></textarea>
    </div>

    <div class="main-container">
        <div class="button-container">
            <button type="submit" onclick="submitText()">Create</button>
        </div>
        <div class="note-container">
            <textarea maxlength="10000" id="noteTextarea" name="noteTextarea" placeholder="Note text..."></textarea>
        </div>
    </div>
</form>
<script>
    function autoResizeTextareaWidth(textarea, noteTextarea) {
        const maxSymbols = 35;
        textarea.style.width = 'auto';

        if (textarea.value.length <= maxSymbols) {
            textarea.style.width = textarea.scrollWidth + 'px';
        } else {
            textarea.style.width = `${noteTextarea.clientWidth}px`; // Исправлено
        }
    }

    function autoResizeTextareaHigh(textarea) {
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
    }

    const titleTextarea = document.getElementById('titleTextarea');
    const noteTextarea = document.getElementById('noteTextarea');

    titleTextarea.addEventListener('input', function() {
        autoResizeTextareaWidth(titleTextarea, noteTextarea);
    });

    noteTextarea.addEventListener('input', function() {
        autoResizeTextareaHigh(noteTextarea);
    });

    autoResizeTextareaWidth(titleTextarea, noteTextarea);
    autoResizeTextareaHigh(noteTextarea);

    titleTextarea.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault();
            titleTextarea.setSelectionRange(0,0);
            titleTextarea.focus();
        }
    });

    function submitText() {
        const el = document.getElementById('titleTextarea');
        alert(`Заметка "${el.value}" создана`);
    }
</script>

</body>
</html>